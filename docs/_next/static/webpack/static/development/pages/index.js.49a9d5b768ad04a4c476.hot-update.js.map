{"version":3,"file":"static/webpack/static/development/pages/index.js.49a9d5b768ad04a4c476.hot-update.js","sources":["webpack:///./pages/index.js"],"sourcesContent":["import React from \"react\";\nimport { app, auth, db } from \"../utils/firebase\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"../style.css\";\nimport {\n  InputGroup,\n  InputGroupAddon,\n  Button,\n  Input,\n  Container,\n  Row,\n  Col,\n  Alert\n} from \"reactstrap\";\n\nclass Home extends React.Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      value: \"\",\n      result: [{ name: \"\", lyric: \"\" }],\n      searchLoader: true,\n      isResult: false,\n      fetchData: false,\n      list : []\n    }\n  };\n\n  componentDidMount = () => {\n    auth.signInAnonymously().catch(function(error) {\n      this.errorMessage = error.message;\n    });\n    this.listenToAuth();\n\n    let {list} = this.state;\n    auth.signInAnonymously().catch(function(error) {\n      this.errorMessage = error.message;\n    });\n    this.listenToAuth();\n\n    let search = db\n      .collection(\"stavan\");\n\n    search.get().then(querySnapshot => {\n      if (querySnapshot.docs.length > 0) {\n        querySnapshot.forEach(doc => {\n          const { name } = doc.data();\n          list.push(name);\n        });\n      }\n    });\n    this.setState({list});\n  };\n\n  listenToAuth = () => {\n    app.auth().onAuthStateChanged(user => {\n      if (user) {\n        // User is signed in.\n        this.userId = user.uid;\n      } else {\n        // User is signed out.\n        this.userId = null;\n      }\n    });\n  };\n\n  handleInput = event => {\n    this.setState({ value: event.target.value });\n    if (event.target.value === \"\") {\n      this.setState({ isResult: false });\n    }\n  };\n\n  onInputKeyPress = e => {\n    // on pressing enter\n    if (e.which === 13) {\n      this.handleSearch();\n    }\n  };\n\n  handleSearch = () => {\n    var self = this;\n    self.setState({ searchLoader: true, isResult: false, fetchData: true });\n    let res = db\n      .collection(\"stavan\")\n      .where(\"name\", \"==\", `${this.state.value.toLowerCase()}`);\n\n    res.get().then(querySnapshot => {\n      if (querySnapshot.docs.length > 0) {\n        querySnapshot.forEach(doc => {\n          const { name, lyrics } = doc.data();\n          let lyric = lyrics.replace(new RegExp(/(\\\\n)+/g), \"\\n\");\n          self.setState(\n            { result: [{ name, lyric }], searchLoader: true, fetchData: true },\n            () => {\n              self.setState({ searchLoader: false });\n            }\n          );\n        });\n      } else {\n        self.setState({ isResult: true, fetchData: false });\n      }\n    });\n  };\n\n  handleClick = (name) => {\n    let inputValue = document.getElementsByClassName('form-control')[0].value;\n    inputValue = name;\n    this.setState({value : inputValue}, ()=>{\n      this.handleSearch();\n    })\n  }\n\n  render() {\n    let { result, searchLoader, fetchData, isResult, list, value } = this.state;\n\n    let filteredList = list.filter((element)=>{\n      return (element.indexOf(value.toLowerCase()) > -1)\n   })\n    return (\n      <div className=\"container\">\n        <h2>Lyrics Finder</h2>\n        <p>Find Lyrics for any stavan</p>\n\n        <InputGroup>\n          <Input\n            placeholder=\"Search by stavan name...\"\n            autoFocus\n            value={this.state.value}\n            onChange={this.handleInput.bind(this)}\n            onKeyPress={this.onInputKeyPress}\n          />\n          <InputGroupAddon addonType=\"append\">\n            <Button color=\"primary\" onClick={this.handleSearch}>\n              Search\n            </Button>\n          </InputGroupAddon>\n        </InputGroup>\n\n        {value \n          ?\n          filteredList.map((name)=>{\n            return <span className='search-list' onClick={this.handleClick.bind(this, name)}>{name}</span>\n          }) \n        : \n        null}\n        {searchLoader ? (\n          fetchData ? (\n            <div>\n              <img\n                src=\"./static/loader.gif\"\n                alt=\"\"\n                width=\"100px\"\n                height=\"100px\"\n              />\n            </div>\n          ) : !isResult ? null : (\n            <Container>\n              <Row>\n                <Col style={{ paddingTop : '15px'}}>\n                    <Alert color=\"info\">\n                      We currently do not have any lyrics for this stavan.\n                    </Alert>\n                </Col>\n              </Row>\n            </Container>\n          )\n        ) : (\n          <div>\n            <h2>{result[0].name.toUpperCase()}</h2>\n            <div className=\"result\">{result[0].lyric.toLowerCase()}</div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default Home;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAUA;AACA;AACA;AACA;AAFA;AAaA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAEA;AAGA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AArCA;AAuCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjDA;AAmDA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAxDA;AA0DA;AACA;AACA;AACA;AACA;AACA;AA/DA;AAiEA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAIA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAxFA;AA0FA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AA9FA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AANA;AAQA;AACA;AAsFA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AAjKA;AACA;AAkKA;;;;A","sourceRoot":""}